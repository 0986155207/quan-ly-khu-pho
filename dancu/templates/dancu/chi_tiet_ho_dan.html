<!DOCTYPE html>
<html lang="vi" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chi tiết Hộ dân - {{ hodan.chu_ho.ho_va_ten|default:"Chưa cập nhật" }}</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css">
    <style>
        /* Bạn có thể copy toàn bộ CSS từ các trang trước để đảm bảo đồng nhất Dark Mode */
        :root[data-theme='light'] { --bg-color: #e9ecef; --card-bg: #ffffff; --text-color: #212529; --muted-text-color: #6c757d; --border-color: #dee2e6; --navbar-bg: #343a40; }
        :root[data-theme='dark'] { --bg-color: #121212; --card-bg: #1e1e1e; --text-color: #e0e0e0; --muted-text-color: rgba(255, 255, 255, 0.6); --border-color: #333; --navbar-bg: #000000; }
        body, .card, .navbar, .table { transition: background-color 0.4s ease, color 0.4s ease; }
        body { font-family: 'Roboto', sans-serif; background-color: var(--bg-color); color: var(--text-color); }
        .navbar { background-color: var(--navbar-bg); }
        .card { background-color: var(--card-bg); }
        .table { color: var(--text-color); }
        [data-theme='dark'] .table-striped > tbody > tr:nth-of-type(odd) > * { --bs-table-accent-bg: rgba(255, 255, 255, 0.05); }
        .theme-switch-wrapper { display: flex; align-items: center; position: fixed; top: 15px; right: 20px; z-index: 1030; }
        /* ... (các CSS còn lại của Dark Mode toggle) ... */
    </style>
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-dark shadow-sm"> ... </nav>

    <main class="container my-4">
        <div class="card shadow-sm">
            <div class="card-header bg-primary text-white">
                <h3 class="mb-0">Thông tin chi tiết Hộ dân</h3>
            </div>
            <div class="card-body">
                <h4 class="card-title">Hộ ông/bà: {{ hodan.chu_ho.ho_va_ten|default:"Chưa cập nhật" }}</h4>
                <hr>
                <div class="row">
                    <div class="col-md-6">
                        <p><strong>Số nhà:</strong> {{ hodan.so_nha }}</p>
                        <p><strong>Khu vực:</strong> {{ hodan.khu_vuc }}</p>
                        <p><strong>Địa chỉ cụ thể:</strong> {{ hodan.dia_chi_cu_the|default_if_none:"" }}</p>
                    </div>
                    <div class="col-md-6">
                        <p><strong>Số điện thoại:</strong> {{ hodan.so_dien_thoai|default_if_none:"" }}</p>
                        <p><strong>Tình trạng hộ:</strong> {{ hodan.get_tinh_trang_ho_display }}</p>
                    </div>
                </div>
                <hr>
                <h5 class="mt-4">Danh sách thành viên trong hộ</h5>
                <div class="table-responsive">
                    <table class="table table-striped table-hover">
                        <thead class="table-light">
                            <tr>
                                <th>Họ và Tên</th>
                                <th>Quan hệ với chủ hộ</th>
                                <th>Ngày sinh</th>
                                <th>Tình trạng</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for thanh_vien in thanh_vien_trong_ho %}
                            <tr>
                                <td>{{ thanh_vien.ho_va_ten }}</td>
                                <td>{{ thanh_vien.get_quan_he_chu_ho_display }}</td>
                                <td>{{ thanh_vien.ngay_sinh|date:"d/m/Y" }}</td>
                                <td>{{ thanh_vien.get_tinh_trang_display }}</td>
                            </tr>
                            {% empty %}
                            <tr>
                                <td colspan="4" class="text-center">Chưa có thông tin thành viên.</td>
                            </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </div>
                <a href="{% url 'danh_ba_dancu' %}" class="btn btn-secondary mt-3">
                    <i class="fa-solid fa-arrow-left"></i> Quay lại Danh bạ
                </a>
            </div>
        </div>
    </main>
    <script>
        // ... (script dark mode)
    </script>
</body>
</html>